{"version":3,"sources":["serviceWorker.js","components/AmazonProductCard.js","components/CheckerServiceLink.js","App.js","index.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","AmazonProductCard","queryParams","Card","className","Body","Title","desc","Subtitle","asin","CheckerServiceLink","primary","configurate","checkerService","onClick","otherProps","ListGroup","Item","action","active","href","getUrl","target","icon","faCheckSquare","fixedWidth","size","faSquare","faCheck","name","CheckerServiceList","id","CheckerServiceListLookup","reduce","r","index","KeyConfigPrimaryCheckerService","App","useState","primaryChecker","setPrimaryChecker","useEffect","localforage","getItem","value","url","open","err","variant","map","key","queryParams_","setItem","matchUrl","search","split","param","exec","splice","decodeURI","unescape","replace","m","ReactDOM","render","document","getElementById","URL","process","origin","addEventListener","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.2170a119.chunk.js","sourcesContent":["\"use struct\";\n\n// このオプションのコードは、Service Workerを登録するために使用されます。\n// register() はデフォルトでは呼び出されません。\n\n// これにより、その後の実稼働時のアクセスでアプリの読み込みが速くなり、\n// オフライン機能が提供されます。 ただし、開発者（およびユーザー）は、\n// 以前にキャッシュされたリソースがバックグラウンドで更新されるため、\n// ページで開いている既存のタブがすべて閉じられた後、ページへの以降の\n// アクセスでのみ展開された更新が表示されます。\n\n// このモデルの利点とオプトイン方法の詳細については、\n// https://bit.ly/CRA-PWA をご覧ください。\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] は IPv6 localhost アドレスです。\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 は IPv4 のローカルホストと見なされます。\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // URLコンストラクターは、SWをサポートするすべてのブラウザーで使用できます。\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // PUBLIC_URL がページの配信元と異なる発信元にある場合サービスワーカーは機能しません。\n      // これは、アセットの提供にCDNが使用されている場合に発生する可能性があります。\n      // https://github.com/facebook/create-react-app/issues/2374 を参照してください\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // これはローカルホストで実行されています。 Service Workerがまだ存在するかどうかを確認しましょう。\n        checkValidServiceWorker(swUrl, config);\n\n        // いくつかの追加のログを localhost に追加し、開発者に\n        // service worker/PWA ドキュメントを参照させます。\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // ローカルホストではありません。サービスワーカーを登録するだけです。\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // この時点で更新された事前キャッシュされたコンテンツが取得されましたが、\n              // 以前のサービスワーカーは、すべてのクライアントタブが閉じられるまで\n              // 古いコンテンツを引き続き提供します。\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // コールバックを実行\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // この時点ですべてが事前にキャッシュされています。\n              // \"コンテンツはオフラインで使用するためにキャッシュされます。\"\n              // メッセージを表示するのに最適なタイミングです。\n              console.log('Content is cached for offline use.');\n\n              // コールバックを実行\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // ページをリロードできない場合、サービスワーカーが見つかるかどうかを確認します。\n  fetch(swUrl)\n    .then(response => {\n      // Service Worker が存在し、JSファイルを実際に取得していることを確認してください。\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // サービスワーカーが見つかりません。おそらく別のアプリ。ページをリロード。\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // サービスワーカーが見つかりました。通常どおり続行。\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport './AmazonProductCard.css';\n\nimport { Card } from 'react-bootstrap';\n\n//import MainView from './main/mainView';\n\nfunction AmazonProductCard({ queryParams }) {\n  \n  return (\n    <Card className=\"amazon-product-card\">\n      <Card.Body>\n        <Card.Title>{queryParams.desc}</Card.Title>\n        <Card.Subtitle className=\"mb-2 text-muted\">{queryParams.asin}</Card.Subtitle>\n      </Card.Body>\n    </Card>\n  );\n}\n\nexport default AmazonProductCard;\n","import React from 'react';\nimport './CheckerServiceLink.css';\n\nimport { ListGroup } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck } from '@fortawesome/free-solid-svg-icons';\nimport { faCheckSquare, faSquare } from '@fortawesome/free-regular-svg-icons';\n\n//import MainView from './main/mainView';\n\nfunction CheckerServiceLink({ primary, configurate, checkerService, queryParams, onClick, ...otherProps }) {\n  //console.log([primary,checkerService]);\n  return (\n    <ListGroup.Item\n      {...otherProps}\n      action\n      active={primary}\n      //variant={primary?\"primary\":\"secondary\"}\n      className=\"checker-link\"\n      onClick={!queryParams.asin?(()=>onClick(checkerService)):(()=>{return false;})}\n      href={queryParams.asin&&checkerService.getUrl(queryParams)}\n      target=\"_blank\"\n    >\n      {configurate\n        ? (primary\n            ? <FontAwesomeIcon icon={faCheckSquare} fixedWidth size=\"lg\" className=\"primary-status\" />\n            : <FontAwesomeIcon icon={faSquare} fixedWidth size=\"lg\" className=\"primary-status\" />)\n        : (primary\n            ? <FontAwesomeIcon icon={faCheck} fixedWidth size=\"lg\" className=\"primary-status\" />\n            : <span className=\"primary-status fa-fw fa-lg\" />)\n      }\n      {checkerService.name}\n    </ListGroup.Item>\n  );\n}\n\nexport default CheckerServiceLink;\n","import React from 'react';\nimport { useEffect, useState } from'react';\nimport './App.css';\n\nimport { ListGroup } from 'react-bootstrap';\nimport { Card } from 'react-bootstrap';\n\nimport localforage from 'localforage';\n\n//import MainView from './main/mainView';\nimport AmazonProductCard from './components/AmazonProductCard';\nimport CheckerServiceLink from './components/CheckerServiceLink';\n\n\nconst CheckerServiceList = [\n//{id: 'mnrate', name: 'モノレート', getUrl: ({asin}) => `https://mnrate.com/item/aid/${asin}` }, // 2020-06-30 EoS\n  {id: 'keepa', name: 'Keepa', getUrl: ({asin}) => `https://keepa.com/#!product/5-${asin}` },\n  {id: 'sakura-checker', name: 'サクラチェッカー', getUrl: ({asin}) => `https://sakura-checker.jp/search/${asin}` },\n  {id: 'kakaku-dot-com', name: '価格.com', getUrl: ({desc}) => `https://kakaku.com/search_results/${desc}` },\n];\nconst CheckerServiceListLookup = CheckerServiceList.reduce(\n  (r, checkerService, index) => {\n    r[checkerService.id] = index;\n    return r;\n  }, {}\n);\n\nconst KeyConfigPrimaryCheckerService = 'config.primary-checker';\n\nfunction App({ queryParams }) {\n  const [ primaryChecker, setPrimaryChecker ] = useState();\n  \n  //console.log('queryParams',queryParams);\n  useEffect(() => {\n    //console.log('queryParams.',queryParams);\n    localforage.getItem(KeyConfigPrimaryCheckerService).then((value) => {\n      const checkerService = CheckerServiceList[CheckerServiceListLookup[value]];\n      if (checkerService) {\n        if (queryParams.asin) {\n          const url  = checkerService.getUrl(queryParams.asin);\n          //window.location.href = url;\n          window.open(url, '_blank');\n        }\n        setPrimaryChecker(checkerService.id);\n      }\n    }).catch((err) => {\n        console.log(err);\n    });\n  }, [queryParams]);\n  \n  return (\n    <div className=\"App\">\n      {queryParams.asin&&<AmazonProductCard queryParams={queryParams} />}\n      {!queryParams.asin&&<Card className=\"config-message\">\n        <Card.Body>\n          優先するサービスを選択してください。\n          選んだサービスへ最初に遷移し表示します。\n        </Card.Body>\n      </Card>}\n\n      <div className=\"check-service-list\">\n\n        <ListGroup variant=\"flush\">\n          {CheckerServiceList.map((checkerService) => (\n            <CheckerServiceLink\n              key={checkerService.id}\n              configurate={!queryParams.asin}\n              primary={primaryChecker===checkerService.id}\n              checkerService={checkerService}\n              queryParams={queryParams}\n              onClick={(queryParams_) => {\n                //console.log(queryParams_);\n                localforage.setItem(KeyConfigPrimaryCheckerService, queryParams_.id).then((value) => {\n                  setPrimaryChecker(value);\n                }).catch((err) => {\n                    console.log(err);\n                });\n              }}\n            />\n          ))}\n        </ListGroup>\n\n\n        {/*\n        <Table responsive>\n          <tbody>\n            {CheckerServiceList.map((checkerService,i) => (\n                <tr key={checkerService.id}>\n                  <td>\n                    <CheckerServiceLink\n                      primary={0==i}\n                      checkerService={checkerService}\n                      queryParams={queryParams}\n                    />\n                    </td>\n                </tr>\n            ))}\n          </tbody>\n            </Table>*/}\n      </div>\n\n{/*<TransitionProgress />*/}\n{/*\n<Form>\n  <div className=\"mb-3\">\n    <Form.Check\n            type=\"checkbox\"\n            label=\"first radio\"\n            name=\"formHorizontalRadios\"\n            id=\"formHorizontalRadios1\"\n          />\n  </div>\n</Form>\n\n<pre>{ Object.keys(window.location).map((k) => {\n        return `${JSON.stringify(k)}: ${JSON.stringify(window.location[k])}\\n`;\n      }) }</pre>\n      <pre>{ Object.keys(queryParams).map((k) => {\n        return `${JSON.stringify(k)}: ${JSON.stringify(queryParams[k])}\\n`;\n      }) }</pre>\n      */}\n      \n    </div>\n  );\n}\n\nexport default App;\n","\"use struct\";\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n//import '@forevolve/bootstrap-dark/dist/css/bootstrap-dark.min.css';\n//import './dark-theme.css';\nimport './index.css';\n\nimport App from './App';\n\nimport('./dark-theme.css')\n  .then(() => { })\n  .catch(err => { });\n\nconst matchUrl = /https[a-zA-Z0-9%_.-]+/;\n\nconst queryParams = window.location.search.split(/[?&]/).reduce((r, param) => {\n  const [ key, value ] = (/^([^=]+)=(.*)/.exec(param)||[]).splice(1);\n  param && (r[key] = decodeURI(value));\n  if ('text' === key) {\n    r['url']  = unescape(matchUrl.exec(r[key]));\n    r['desc'] = unescape(r[key].replace(matchUrl, '').replace(/\\+/g, ' '));\n    let m = /https:\\/\\/www\\.amazon\\.co\\.jp\\/dp\\/([A-Za-z0-9]+)/.exec(r['url']);\n    if (m) {\n      r['asin'] = m[1];\n    }\n  }\n  return r;\n}, {});\n\n//const models = {};\n\nReactDOM.render(<App queryParams={queryParams} />, document.getElementById('root'));\n\n// アプリをオフラインで動作させてより速くロードしたい場合は、以下で unregister() を\n// register() に変更できます。これにはいくつかの落とし穴があります。\n// サービスワーカーの詳細: https://bit.ly/CRA-PWA\n\nserviceWorker.register();\n\n// 要求スペック\n//   config#onUpdate(registration);\n//   config#onSuccess(registration);\n// serviceWorker.register(config);\n"],"sourceRoot":""}